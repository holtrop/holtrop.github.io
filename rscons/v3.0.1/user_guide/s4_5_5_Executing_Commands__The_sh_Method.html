<html>
  <head>
    <title>Rscons User Guide - 4.5.5 Executing Commands: The sh Method - Version 3.0.1</title>
    <style>
      body {
        background-color: #CCC;
        margin: 0px;
        padding: 0px;
      }
      #body-content {
        margin-left: auto;
        margin-right: auto;
        margin-top: 1em;
        margin-bottom: 1em;
        border: 1px solid black;
        background-color: #FFF;
        width: 120ex;
        padding: 2ex;
      }
      a {
        text-decoration: none;
      }
      .separator {
        height: 2em;
      }
      .img_block_center {
        display: block;
        margin-left: auto;
        margin-right: auto;
      }
      .page_nav {
        width: 100%;
        table-layout: fixed;
      }
      .page_nav_toc {
        text-align: center;
      }
      .page_nav_next {
        text-align: right;
      }
      .code {
        padding-left: 2ex;
        width: 116ex;
        overflow-x: auto;
      }
      .ruby_code .normal {}
      .ruby_code .comment { color: #005; font-style: italic; }
      .ruby_code .keyword { color: #A00; font-weight: bold; }
      .ruby_code .method { color: #077; }
      .ruby_code .class { color: #074; }
      .ruby_code .module { color: #050; }
      .ruby_code .punct { color: #447; font-weight: bold; }
      .ruby_code .symbol { color: #099; }
      .ruby_code .string { color: #090; }
      .ruby_code .char { color: #F07; }
      .ruby_code .ident { color: #004; }
      .ruby_code .constant { color: #07F; }
      .ruby_code .regex { color: #B66; }
      .ruby_code .number { color: #D55; }
      .ruby_code .attribute { color: #377; }
      .ruby_code .global { color: #3B7; }
      .ruby_code .expr { color: #227; }
    </style>
  </head>
  <body>
    <div id="body-content"><table class="page_nav"><tr><td class="page_nav_prev"><a href="s4_5_4_Using_Subsidiary_Build_Scripts__The_rscons_Method.html">&laquo; Prev<br/>4.5.4 Using Subsidiary Build Scripts: The rscons Method</a></td><td class="page_nav_toc"><a href="toc.html">Table of Contents</a></td><td class="page_nav_next"><a href="s4_6_Extending_Rscons.html">Next &raquo<br/>4.6 Extending Rscons</a></td></tr></table><div class="separator"></div><a name="s4_5_5_Executing_Commands__The_sh_Method" /><h3>4.5.5 Executing Commands: The sh Method</h3>

<p>The
<a href="../yard/Rscons/Script/GlobalDsl.html#sh-instance_method"><code>sh</code></a>
build script method can be used to directly execute commands.
The <code>sh</code> method accepts either a single String argument or an Array of Strings.
When an Array is given, if the array length is greater than 1, then the command
will not be executed and interpreted by the system shell.
Otherwise, it will be executed and interpreted by the system shell.</p>

<p>For example:</p>

<div class="code ruby_code">
<pre><span class="ident">default</span> <span class="keyword">do</span>
  <span class="comment"># Run &quot;make&quot; in imported &quot;subcomponent&quot; directory.</span>
  <span class="ident">sh</span> <span class="punct">&quot;</span><span class="string">cd subcomponent; make</span><span class="punct">&quot;</span>
  <span class="comment"># Move a file around.</span>
  <span class="ident">sh</span> <span class="punct">&quot;</span><span class="string">mv</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">subcomponent/file with spaces.txt</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">new_name.txt</span><span class="punct">&quot;</span>
<span class="keyword">end</span>
</pre>
</div>

<p>If the command fails, rscons will normally print the error and terminate
execution.
If the <code>:continue</code> option is set, then rscons will not terminate execution.
For example:</p>

<div class="code ruby_code">
<pre><span class="ident">default</span> <span class="keyword">do</span>
  <span class="comment"># This command will fail and a message will be printed.</span>
  <span class="ident">sh</span> <span class="punct">&quot;</span><span class="string">false</span><span class="punct">&quot;,</span> <span class="ident">continue</span><span class="punct">:</span> <span class="constant">true</span>
  <span class="comment"># However, due to the :continue option being set, execution will continue.</span>
  <span class="ident">sh</span> <span class="punct">&quot;</span><span class="string">echo hi</span><span class="punct">&quot;</span>
<span class="keyword">end</span>
</pre>
</div>

<p>Options that Ruby&#39;s <code>spawn</code> method accepts can also be passed in to the <code>sh</code>
method.
For example, to execute the given command with a different working directory,
the <code>:chdir</code> option can be specified:</p>

<div class="code ruby_code">
<pre><span class="ident">default</span> <span class="keyword">do</span>
  <span class="comment"># Execute 'ls' from within the 'src' directory:</span>
  <span class="ident">sh</span> <span class="punct">&quot;</span><span class="string">ls</span><span class="punct">&quot;,</span> <span class="ident">chdir</span><span class="punct">:</span> <span class="punct">&quot;</span><span class="string">src</span><span class="punct">&quot;</span>
<span class="keyword">end</span>
</pre>
</div>
<div class="separator"></div><table class="page_nav"><tr><td class="page_nav_prev"><a href="s4_5_4_Using_Subsidiary_Build_Scripts__The_rscons_Method.html">&laquo; Prev<br/>4.5.4 Using Subsidiary Build Scripts: The rscons Method</a></td><td class="page_nav_toc"><a href="toc.html">Table of Contents</a></td><td class="page_nav_next"><a href="s4_6_Extending_Rscons.html">Next &raquo<br/>4.6 Extending Rscons</a></td></tr></table></div>
  </body>
</html>
